!function(){var c={byte:256,short:65536,tribyte:16777216,int:4294967296,float:16777217,double:Number.MAX_SAFE_INTEGER},r=["byte","short","tribyte","int","float","double"],t=["uByte","sByte","uShort","sShort","uTribyte","sTribyte","uInt","sInt","float","double"];function u(t){switch(t){case"byte":return 1;case"short":return 2;case"tribyte":return 3;case"int":case"float":return 4;case"double":return 8;default:throw new Error("Incorrect number type '"+t+"'")}}function e(t){switch(t){case 1:return"byte";case 2:return"short";case 3:return"tribyte";case 4:return"int";default:return"double"}}function n(t,r){return(t%r+r)%r}var o=/^[0-9a-fA-F]+$/;var i={version:"1.6.1",Boolean:function(){this.encode=function(t){return t?"":"\0"},this.decode=function(t){var r="string"==typeof t?{val:t}:t,e=1===r.val.charCodeAt(0);return r.val=r.val.slice(1),e}},Number:function(n){if(n=n||"double",-1===t.indexOf(n))throw new Error("Incorrect Number type '"+n+"'");var o=u(("double"!==n&&"float"!==n?n.slice(1):n).toLowerCase());this.encode=function(t){return s.to[n](t)},this.decode=function(t){var r="string"==typeof t?{val:t}:t,e=s.from[n](r.val.slice(0,o));return r.val=r.val.slice(o),e}},String:function(t){var i="number"==typeof t;if(i){if((t=Math.floor(t))<0)throw new Error("String cannot have a fixed length shorter than 0");var a=t}else{var h=t||"nullTer";if("nullTer"!==h&&-1===r.indexOf(h))throw new Error("Incorrect String size number type '"+h+"'")}this.encode=function(t){if(i){if(t.length===a)return t;throw new Error("Passed string isn't of specified length "+a+"!")}return"nullTer"===h?(-1!==t.indexOf("\0")&&t.replace(/\u0000/g," "),t+"\0"):(t=t.slice(0,c[h]-1),s.to[h](t.length)+t)},this.decode=function(t){var r,e="string"==typeof t?{val:t}:t;if(i)r=e.val.slice(0,a),e.val=e.val.slice(a);else if("nullTer"===h)r=e.val.slice(0,e.val.indexOf("\0")),e.val=e.val.slice(r.length+1);else{var n=u(h),o=s.from[h](e.val.slice(0,n));r=e.val.slice(n,n+o),e.val=e.val.slice(n+o)}return r}},HexString:function(l){var f="number"==typeof l;if(f&&(l=Math.floor(l))<0)throw new Error("HexString cannot have a fixed length shorter than 0");this.encode=function(t){if(r=t,!o.test(r))throw new Error("Passed string is not a HexString!");var r;if(f&&t.length!==l)throw new Error("Passed string isn't of specified length "+l+"!");var e="";f||(e+=String.fromCharCode(t.length%2==0?1:0));for(var n=0;n<t.length;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2<=t.length-n?2:1),16));return f||(e+="Ā"),e},this.decode=function(t){var r,e="string"==typeof t?{val:t}:t;if(f)r=e.val.slice(0,Math.ceil(l/2));else{var n=1===e.val.charCodeAt(0),o=e.val.indexOf("Ā");r=e.val.slice(1,o)}for(var i="",a=0;a<r.length;a++)if(a!==r.length-1)i+=("00"+r.charCodeAt(a).toString(16)).slice(-2);else{var h=!1;f||n||(h=!0),f&&l%2==1&&(h=!0),i+=h?r.charCodeAt(a).toString(16):("00"+r.charCodeAt(a).toString(16)).slice(-2)}return e.val=e.val.slice(r.length+(f?0:2)),i}},Object:function(a,h){var l=Object.keys(a);if(l.sort(),h){var f=Math.ceil(Math.log2(l.length)/8)||1,c=e(f);f=u(c)}this.encode=function(t){var r="";if(h)for(var e in r+=s.to[c](Object.keys(t).length),t){if(void 0===a[e])throw new Error("Key '"+e+"' is not defined in the blueprint!");r+=s.to[c](l.indexOf(e))+a[e].encode(t[e])}else for(var n=0;n<l.length;n++){if(void 0===t[e=l[n]])throw new Error("Key '"+e+"' is defined in the blueprint, but not in the input object!");r+=a[e].encode(t[e])}return r},this.decode=function(t){var r={},e="string"==typeof t?{val:t}:t;if(h){var n=s.from[c](e.val.slice(0,f));e.val=e.val.slice(f);for(o=0;o<n;o++){i=l[s.from[c](e.val.slice(0,f))];e.val=e.val.slice(f),r[i]=a[i].decode(e)}}else for(var o=0;o<l.length;o++){var i;r[i=l[o]]=a[i].decode(e)}return r}},Array:function(a,h){if(void 0!==h){var l="number"==typeof h;if(l){if((h=Math.floor(h))<0)throw new Error("Array cannot have a fixed length shorter than 0")}else{if(!(-1<r.indexOf(h)))throw new Error("Incorrect Array size number type '"+h+"'");var f=u(h)}}this.encode=function(t){if(t.length%a.length!=0)throw new Error("Array (length "+t.length+") contains at least one incomplete pattern!");var r="";if(void 0!==h){if(l){if(t.length!==h*a.length)throw new Error("Array pattern in the input isn't repeated exactly "+h+" times, as was specified")}else t=t.slice(0,(c[h]-1)*a.length);for(var e=Math.ceil(t.length/a.length),n=0;n<e;n++)for(var o=0;o<a.length;o++)r+=a[o].encode(t[n*a.length+o]);l||(r=s.to[h](e)+r)}else for(n=0;n<a.length;n++)r+=a[n].encode(t[n]);return r},this.decode=function(t){var r=[],e="string"==typeof t?{val:t}:t;if(h){var n;l?n=h:(n=s.from[h](e.val.slice(0,f)),e.val=e.val.slice(f));for(var o=0;o<n;o++)for(var i=0;i<a.length;i++)r[o*a.length+i]=a[i].decode(e)}else for(o=0;o<a.length;o++)r[o]=a[o].decode(e);return r}},Dynamic:function(o){var i=Object.keys(o);i.sort();var n=Math.ceil(Math.log2(i.length)/8)||1,a=e(n);n=u(a),this.encode=function(t,r){var e,n;if(void 0!==r?(e=t,n=r):(e=t.key,n=t.value),void 0===o[e])throw new Error("Key '"+e+"' is not defined!");return s.to[a](i.indexOf(e))+(null===o[e]?"":o[e].encode(n))},this.decode=function(t){var r="string"==typeof t?{val:t}:t,e=i[s.from[a](r.val.slice(0,n))];return r.val=r.val.slice(n),{key:e,value:null===o[e]?null:o[e].decode(r)}}},NullWrapper:function(n){this.encode=function(t){return null===t?"\0":""+n.encode(t)},this.decode=function(t){var r="string"==typeof t?{val:t}:t,e=0===r.val.charCodeAt(0);return r.val=r.val.slice(1),e?null:n.decode(r)}}},a=new ArrayBuffer(8),h=new Uint8Array(a),l=new Float32Array(a),f=new Float64Array(a),s={to:{uByte:function(t){return t=n(Math.round(t),c.byte),String.fromCharCode(t)},uShort:function(t){return t=n(Math.round(t),c.short),String.fromCharCode(Math.floor(t/c.byte))+String.fromCharCode(t%c.byte)},uTribyte:function(t){return t=n(Math.round(t),c.tribyte),String.fromCharCode(Math.floor(t/c.short))+String.fromCharCode(Math.floor(t%c.short/c.byte))+String.fromCharCode(t%c.byte)},uInt:function(t){return t=n(Math.round(t),c.int),String.fromCharCode(Math.floor(t/c.tribyte))+String.fromCharCode(Math.floor(t%c.tribyte/c.short))+String.fromCharCode(Math.floor(t%c.short/c.byte))+String.fromCharCode(t%c.byte)},sByte:function(t){return this.uByte(t+c.byte/2)},sShort:function(t){return this.uShort(t+c.short/2)},sTribyte:function(t){return this.uTribyte(t+c.tribyte/2)},sInt:function(t){return this.uInt(t+c.int/2)},float:function(t){return l[0]=t,String.fromCharCode(h[0])+String.fromCharCode(h[1])+String.fromCharCode(h[2])+String.fromCharCode(h[3])},double:function(t){return f[0]=t,String.fromCharCode(h[0])+String.fromCharCode(h[1])+String.fromCharCode(h[2])+String.fromCharCode(h[3])+String.fromCharCode(h[4])+String.fromCharCode(h[5])+String.fromCharCode(h[6])+String.fromCharCode(h[7])}},from:{uByte:function(t){return n(t.charCodeAt(0),c.byte)},uShort:function(t){return n(t.charCodeAt(0)*c.byte+t.charCodeAt(1),c.short)},uTribyte:function(t){return n(t.charCodeAt(0)*c.short+t.charCodeAt(1)*c.byte+t.charCodeAt(2),c.tribyte)},uInt:function(t){return n(t.charCodeAt(0)*c.tribyte+t.charCodeAt(1)*c.short+t.charCodeAt(2)*c.byte+t.charCodeAt(3),c.int)},sByte:function(t){return this.uByte(t)-c.byte/2},sShort:function(t){return this.uShort(t)-c.short/2},sTribyte:function(t){return this.uTribyte(t)-c.tribyte/2},sInt:function(t){return this.uInt(t)-c.int/2},float:function(t){return h[0]=t.charCodeAt(0),h[1]=t.charCodeAt(1),h[2]=t.charCodeAt(2),h[3]=t.charCodeAt(3),l[0]},double:function(t){return h[0]=t.charCodeAt(0),h[1]=t.charCodeAt(1),h[2]=t.charCodeAt(2),h[3]=t.charCodeAt(3),h[4]=t.charCodeAt(4),h[5]=t.charCodeAt(5),h[6]=t.charCodeAt(6),h[7]=t.charCodeAt(7),f[0]}}};s.to.byte=s.to.uByte,s.to.short=s.to.uShort,s.to.tribyte=s.to.uTribyte,s.to.int=s.to.uInt,s.from.byte=s.from.uByte,s.from.short=s.from.uShort,s.from.tribyte=s.from.uTribyte,s.from.int=s.from.uInt,"object"==typeof module&&"object"==typeof module.exports?module.exports=i:"undefined"!=typeof window?window.binary=i:this.binary=i}();