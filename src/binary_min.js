!function(){function r(r){switch(r){case"byte":return 1;case"short":return 2;case"tribyte":return 3;case"int":case"float":return 4;case"double":return 8;default:throw new Error("Incorrect number type '"+r+"'")}}function t(r){switch(r){case 1:return"byte";case 2:return"short";case 3:return"tribyte";case 4:return"int";default:return"double"}}function e(r){return r.charAt(0).toUpperCase()+r.slice(1)}var o={byte:256,short:65536,tribyte:16777216,int:4294967296,float:16777217,double:Number.MAX_SAFE_INTEGER},n=["byte","short","tribyte","int","float","double"],i=["uByte","sByte","uShort","sShort","uTribyte","sTribyte","uInt","sInt","float","double"],a={Boolean:function(){this.encode=function(r){return f.toUByte(r?1:0)},this.decode=function(r){var t="string"==typeof r?{val:r}:r,e=1===f.fromUByte(t.val.charAt(0));return t.val=t.val.slice(1),e}},Number:function(t){if(t=t||"double",-1===i.indexOf(t))throw new Error("Incorrect Number type '"+t+"'");var o=r(("double"!==t&&"float"!==t?t.slice(1):t).toLowerCase());this.encode=function(r){return f["to"+e(t)](r)},this.decode=function(r){var n="string"==typeof r?{val:r}:r,i=f["from"+e(t)](n.val.slice(0,o));return n.val=n.val.slice(o),i}},String:function(t){if("nullTer"!==(t=t||"nullTer")&&-1===n.indexOf(t))throw new Error("Incorrect String size number type '"+t+"'");this.encode=function(r){return"nullTer"===t?r+String.fromCharCode(0):f["toU"+e(t)](r.length)+r.slice(0,o[t])},this.decode=function(o){var n,i="string"==typeof o?{val:o}:o;if("nullTer"===t)n=i.val.slice(0,i.val.indexOf(String.fromCharCode(0))),i.val=i.val.slice(n.length+1);else{var a=r(t),h=f["fromU"+e(t)](i.val.slice(0,a));n=i.val.slice(a,a+h),i.val=i.val.slice(a+h)}return n}},Object:function(r){this.encode=function(t){var e="";for(var o in r)e+=r[o].encode(t[o]);return e},this.decode=function(t){var e={},o="string"==typeof t?{val:t}:t;for(var n in r)e[n]=r[n].decode(o);return e}},Array:function(t,o){if(o){if(!(n.indexOf(o)>-1))throw new Error("Incorrect Array size number type '"+o+"'");var i=r(o)}this.encode=function(r){var n="";if(o){for(var i=Math.ceil(r.length/t.length),a=0;a<i;a++)for(var h=0;h<t.length;h++)n+=t[h].encode(r[a*t.length+h]);n=f["toU"+e(o)](i)+n}else for(a=0;a<t.length;a++)n+=t[a].encode(r[a]);return n},this.decode=function(r){var n=[],a="string"==typeof r?{val:r}:r;if(o){var h=f["fromU"+e(o)](a.val.slice(0,i));a.val=a.val.slice(i);for(u=0;u<h;u++)for(var c=0;c<t.length;c++)n[u*t.length+c]=t[c].decode(a)}else for(var u=0;u<t.length;u++)n[u]=t[u].decode(a);return n}},Dynamic:function(o){var n=Object.keys(o),i=Math.ceil(Math.log2(n.length)/8)||1,a=t(i);i=r(a),this.encode=function(r){return f["to"+("double"!==a?"U":"")+e(a)](n.indexOf(r.key))+o[r.key].encode(r.value)},this.decode=function(r){var t="string"==typeof r?{val:r}:r,h=n[f["from"+("double"!==a?"U":"")+e(a)](t.val.slice(0,i))];return t.val=t.val.slice(i),{key:h,value:o[h].decode(t)}}},NullWrapper:function(r){this.encode=function(t){return null===t?String.fromCharCode(0):String.fromCharCode(1)+r.encode(t)},this.decode=function(t){var e="string"==typeof t?{val:t}:t,o=0===e.val.charCodeAt(0);return e.val=e.val.slice(1),o?null:r.decode(e)}}},f={fromUByte:function(r){return r.charCodeAt(0)%o.byte},toUByte:function(r){return r=Math.round(r)%o.byte,String.fromCharCode(r)},fromUShort:function(r){return(r.charCodeAt(0)*o.byte+r.charCodeAt(1))%o.short},toUShort:function(r){return r=Math.round(r)%o.short,String.fromCharCode(Math.floor(r/o.byte))+String.fromCharCode(r%o.byte)},fromUTribyte:function(r){return(r.charCodeAt(0)*o.short+r.charCodeAt(1)*o.byte+r.charCodeAt(2))%o.tribyte},toUTribyte:function(r){return r=Math.round(r)%o.tribyte,String.fromCharCode(Math.floor(r/o.short))+String.fromCharCode(Math.floor(r%o.short/o.byte))+String.fromCharCode(r%o.byte)},fromUInt:function(r){return(r.charCodeAt(0)*o.tribyte+r.charCodeAt(1)*o.short+r.charCodeAt(2)*o.byte+r.charCodeAt(3))%o.int},toUInt:function(r){return r=Math.round(r)%o.int,String.fromCharCode(Math.floor(r/o.tribyte))+String.fromCharCode(Math.floor(r%o.tribyte/o.short))+String.fromCharCode(Math.floor(r%o.short/o.byte))+String.fromCharCode(r%o.byte)},fromSByte:function(r){return this.fromUByte(r)-o.byte/2},toSByte:function(r){return this.toUByte(r+o.byte/2)},fromSShort:function(r){return this.fromUShort(r)-o.short/2},toSShort:function(r){return this.toUShort(r+o.short/2)},fromSTribyte:function(r){return this.fromUTribyte(r)-o.tribyte/2},toSTribyte:function(r){return this.toUTribyte(r+o.tribyte/2)},fromSInt:function(r){return this.fromUInt(r)-o.int/2},toSInt:function(r){return this.toUInt(r+o.int/2)},fromFloat:function(r){var t=r.charCodeAt(0)%128*2+(r.charCodeAt(1)>=128?1:0)-127,e=r.charCodeAt(0)>=128?-1:1;if(-127===t)return 0*e;if(128===t)return 0==(64&r.charCodeAt(1))?1/0*e:NaN;var o=1;return o+=r.charCodeAt(1)%128/128,o+=r.charCodeAt(2)/128/256,o+=r.charCodeAt(3)/128/256/256,e*Math.pow(2,t)*o},toFloat:function(r){if(0===r)return String.fromCharCode(1/r>0?0:128)+"\0\0\0";if(isNaN(r))return"À\0\0";var t=Math.abs(r),e=Math.min(128,Math.max(-127,Math.floor(Math.log2(t))));if(128===e)return String.fromCharCode(127+(r>0?0:128))+"\0\0";var o=e+127,n=128*(t/Math.pow(2,e)-1),i=0|n,a=String.fromCharCode((r>0?0:128)+(o>>>1))+String.fromCharCode(o%2*128+i);return n=256*(n-i),i=0|n,a+=String.fromCharCode(i),n=256*(n-i),a+=String.fromCharCode(0|n)},fromDouble:function(r){var t=r.charCodeAt(0)%128*16+(240&r.charCodeAt(1))/16-1023,e=r.charCodeAt(0)>=128?-1:1;if(-1023===t)return 0*e;if(1024===t)return 0==(8&r.charCodeAt(1))?1/0*e:NaN;var o=1;return o+=r.charCodeAt(1)%16/16,o+=r.charCodeAt(2)/16/256,o+=r.charCodeAt(3)/16/256/256,o+=r.charCodeAt(4)/16/256/256/256,o+=r.charCodeAt(5)/16/256/256/256/256,o+=r.charCodeAt(6)/16/256/256/256/256/256,o+=r.charCodeAt(7)/16/256/256/256/256/256/256,e*Math.pow(2,t)*o},toDouble:function(r){if(0===r)return String.fromCharCode(1/r>0?0:128)+"\0\0\0\0\0\0\0";if(isNaN(r))return"ø\0\0\0\0\0\0";var t=Math.abs(r),e=Math.min(1024,Math.max(-1023,Math.floor(Math.log2(t))));if(1024===e)return String.fromCharCode(127+(r>0?0:128))+"ð\0\0\0\0\0\0";var o=e+1023,n=16*(t/Math.pow(2,e)-1),i=0|n,a=String.fromCharCode((r>0?0:128)+(o>>>4))+String.fromCharCode(o%16*16+i);return n=256*(n-i),i=0|n,a+=String.fromCharCode(i),n=256*(n-i),i=0|n,a+=String.fromCharCode(i),n=256*(n-i),i=0|n,a+=String.fromCharCode(i),n=256*(n-i),i=0|n,a+=String.fromCharCode(i),n=256*(n-i),i=0|n,a+=String.fromCharCode(i),n=256*(n-i),a+=String.fromCharCode(0|n)}};"object"==typeof module&&"object"==typeof module.exports?module.exports=a:"undefined"!=typeof window?window.binary=a:this.binary=a}();